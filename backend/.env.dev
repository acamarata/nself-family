# nself-family - Development Environment Configuration
# This file contains development defaults for the nSelf CLI
# Loaded first in the environment cascade

# =============================================================================
# Core Project Settings
# =============================================================================

PROJECT_NAME=nself-family
# Docker Compose project name (shown in Docker Desktop)
COMPOSE_PROJECT_NAME=nfamily
PROJECT_DESCRIPTION="É³Family - FOSS reference implementation for family collaboration platform"
BASE_DOMAIN=local.nself.org
ENV=dev
ADMIN_EMAIL=admin@local.nself.org

# =============================================================================
# Core Services (All Enabled for Development)
# =============================================================================

POSTGRES_ENABLED=true
HASURA_ENABLED=true
AUTH_ENABLED=true
STORAGE_ENABLED=true
REDIS_ENABLED=true
NSELF_ADMIN_ENABLED="false   # Optional admin UI"

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================

POSTGRES_VERSION=16-alpine
# Port 5433 avoids conflict with other nself projects on default 5432
POSTGRES_PORT=5433
POSTGRES_DB=nself_family_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=nself_family_dev_secure_password_32chars
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB

# =============================================================================
# Hasura GraphQL Configuration
# =============================================================================

HASURA_VERSION=v2.36.0
# Port 8081 avoids conflict with other nself projects on default 8080
HASURA_GRAPHQL_PORT=8081
HASURA_GRAPHQL_ADMIN_SECRET=dev-secret-change-in-production
HASURA_GRAPHQL_JWT_SECRET='{"type":"HS256","key":"dev-jwt-secret-min-32-chars-required"}'
HASURA_GRAPHQL_ENABLE_CONSOLE=true
HASURA_GRAPHQL_DEV_MODE=true
HASURA_GRAPHQL_CORS_DOMAIN=*
HASURA_GRAPHQL_UNAUTHORIZED_ROLE=anonymous
HASURA_GRAPHQL_ENABLE_TELEMETRY=false

# =============================================================================
# Storage Service (MinIO) Configuration
# =============================================================================

STORAGE_VERSION=latest
# Ports 9002/9003 avoid conflicts with other nself projects on default 9000/9001
MINIO_PORT=9002
MINIO_CONSOLE_PORT=9003
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin_dev
S3_BUCKET=nself-family-dev
S3_REGION=us-east-1
STORAGE_MAX_FILE_SIZE="52428800  # 50MB"

# =============================================================================
# Redis Configuration
# =============================================================================

REDIS_VERSION=7-alpine
# Port 6380 avoids conflict with other nself projects on default 6379
REDIS_PORT=6380
REDIS_PASSWORD=nself_family_redis_dev_password

# =============================================================================
# Mail Service (MailHog for development)
# =============================================================================

MAILHOG_ENABLED=true
# Ports 1026/8026 avoid conflicts with other nself projects on default 1025/8025
MAILHOG_SMTP_PORT=1026
MAILHOG_UI_PORT=8026
MAIL_SMTP_HOST=localhost
MAIL_SMTP_PORT=1026
MAIL_FROM=noreply@local.nself.org

# =============================================================================
# Frontend App Configuration
# =============================================================================

# Frontend app routes (nSelf CLI auto-configures these)
FRONTEND_APP_1_ROUTE=family.local.nself.org
FRONTEND_APP_1_PORT=3000
FRONTEND_APP_1_DIR=../frontend

# =============================================================================
# Development Flags
# =============================================================================

DEBUG=false
VERBOSE=false
AUTO_FIX=true

# =============================================================================
# Demo Mode (OFF for development)
# =============================================================================

DEMO_MODE=false

# =============================================================================
# Seed Users (Enabled for development/testing)
# =============================================================================

SEED_USERS=true

# =============================================================================
# Custom Services (nSelf CLI CS_N pattern)
# =============================================================================

CS_1=auth:fastify:4000
CS_2=api:fastify:4001

# =============================================================================
# Auth Service Configuration
# =============================================================================

JWT_SECRET=dev-jwt-secret-min-32-chars-required!!
JWT_ACCESS_TOKEN_EXPIRES_IN=900
JWT_REFRESH_TOKEN_EXPIRES_IN=604800
BCRYPT_ROUNDS=10
AUTH_SERVICE_PORT=4000
API_SERVICE_PORT=4001
